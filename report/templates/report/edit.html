<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Daily</title>
</head>
<body>
<h4>前三天：</h4>
<table id="last" border="1">
    <tr>
        <th>项目</th>
        <th>工作类型</th>
        <th>Bug ID</th>
        <th>简要描述</th>
        <th>优先级</th>
        <th>是否reopen</th>
        <th>reopen原因</th>
        <th>解决方案</th>
        <th>原因</th>
        <th>责任人</th>
        <th>日期</th>
        <th>备注</th>
    </tr>
</table>
<br>
<h4>今日：</h4>
<table id="today" border="1" cellpadding="0" cellspacing="0">
    <tr>
        <th>项目</th>
        <th>工作类型</th>
        <th>Bug ID</th>
        <th>简要描述</th>
        <th>优先级</th>
        <th>是否reopen</th>
        <th>reopen原因</th>
        <th>解决方案</th>
        <th>原因</th>
        <th>责任人</th>
        <th>日期</th>
        <th>备注</th>
    </tr>
    <tr id="content">
        <td>
            <input id="project" type="text">
        </td>
        <td>
            <select id="work_type">
                <option>解决bug</option>
                <option>非bug库问题处理</option>
                <option>基线升级</option>
                <option>需求分析实现</option>
                <option>团队建设</option>
                <option>项目支持</option>
                <option>SPM工作</option>
                <option>请假</option>
            </select>
        </td>
        <td>
            <input id="bugid" type="text">
        </td>
        <td>
            <textarea id="describe"></textarea>
        </td>
        <td>
            <select id="priority">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </td>
        <td>
            <select id="reopen">
                <option>是</option>
                <option>否</option>
            </select>
        </td>
        <td>
            <textarea id="reopen_reason"></textarea>
        </td>
        <td>
            <select id="solution">
                <option>入库</option>
                <option>转其他组</option>
                <option>非问题</option>
                <option>是问题不修改</option>
                <option>重复</option>
                <option>不复现关闭</option>
                <option>输出文档</option>
            </select>
        </td>
        <td>
            <select id="solution_reason">
                <option>原始问题</option>
                <option>转其他组</option>
                <option>修改引入</option>
                <option>新需求</option>
                <option>需求遗留问题</option>
                <option>非问题</option>
            </select>
        </td>
        <td>
            <input id="person" value="aaa" readonly="true"/>
        </td>
        <td>
            <input id="date" value="2017/12/13" readonly="true"/>
        </td>
        <td>
            <textarea id="remake"></textarea>
        </td>
    </tr>
</table>
<input id="insert" type="button" value="插入一行" onclick="insert()"><br>
<input id="submit" type="button" value="提交" onclick="submit_info()">
{#<script src="../../static/report/edit.js"></script>#}
<script>
    console.log("111111111111");
    var user = document.cookie.split(";")[1].split("=")[1];
    console.log(user);

{#    var last = document.getElementById("last");#}
{#    var today = document.getElementById("today");#}
{#    var json_obj = JSON.parse(json_text);#}
{#    for (var i = 0; i < json_obj.info.length; i++) {#}
{#        var line = document.createElement("tr");#}
{#        for (var j = 0; j < json_obj.info[0].length; j++) {#}
{#            var cell = document.createElement("td");#}
{#            cell.innerText = json_obj.info[i][j];#}
{#            line.appendChild(cell);#}
{#        }#}
{#        last.appendChild(line);#}
{#    }#}

    function insert() {
        console.log("22222");
        var new_node = document.getElementById("content");
        today.appendChild(new_node.cloneNode(true));
    }

    function submit_info() {
        var mytable = document.getElementById("today");
        var data = [];
        for (var i = 1, rows = mytable.rows.length; i < rows; i++) {
            for (var j = 0, cells = mytable.rows[i].cells.length; j < cells; j++) {
                if (!data[i]) {
                    data[i] = [];
                }
                data[i][j] = mytable.rows[i].cells[j].firstElementChild.value;
            }
        }
        // var info = {
        //     "info": data
        // };
        console.log(JSON.stringify(data.slice(1)));
    }
</script>
</body>
</html>